<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="replyMapper">
 	<resultMap type="Reply" id="replyResultSet">
		<id property="replyNo" column="REPLY_NO"/>
        <result property="content" column="REPLY_CONTENT"/>
        <result property="parentBoardNo" column="PARENT_BOARD_NO"/>
        <result property="replyCreateDate" column="REPLY_CREATE_DT"/>
        <result property="replyModifyDate" column="REPLY_MODIFY_DT"/>
        <result property="replyStatus" column="REPLY_STATUS"/>
        <result property="replySelect" column="REPLY_SELECT"/>
        <result property="qnaNo" column="QNA_NO"/>
        <result property="replyWriter" column="REPLY_WRITER"/>
      
	</resultMap>
	
 	<!--  댓글 조회  -->
	<select id="selectList" parameterType="_int" resultMap="replyResultSet">
	<!-- SELECT * FROM V_RREPLY
	WHERE PARENT_BOARD_NO= #{qnaNo}
	ORDER BY REPLY_NO DESC -->
	SELECT REPLY_NO, REPLY_CONTENT, REPLY_CREATE_DATE, MEMBER_ID AS REPLY_WRITER , REPLY_CREATE_DATE, REPLY_MODIFY_DATE FROM REPLY 
    JOIN MEMBER ON (REPLY_WRITER = MEMBER_NO)
    WHERE PARENT_BOARD_NO = #{qnaNo}
	</select>
 	
 	<!--  댓글 삽입  -->
 	<insert id="insertReply" parameterType="Reply" >
 	INSERT INTO REPLY(REPLY_NO, REPLY_CONTENT,PARENT_BOARD_NO, REPLY_WRITER) 
	VALUES(SEQ_RNO.NEXTVAL, #{content}, #{parentBoardNo}, #{replyWriter})
 	</insert>
 	
 	<!-- 대댓글삽입  -->
 	<insert id="insertReply2" parameterType="Reply" >
 	INSERT INTO REPLY(REPLY_NO, REPLY_CONTENT,PARENT_BOARD_NO,REPLY_WRITER) 
	VALUES(SEQ_RNO.NEXTVAL, #{content}, #{parentBoardNo}, #{replyWriter})
 	</insert>
 	
</mapper>
